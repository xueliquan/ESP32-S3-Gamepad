# 引脚分配表

## ESP32-S3-WROOM-1-N8R2 引脚映射

### 按钮引脚 (17个)
| GPIO | 功能 | 内部上拉 | 备注 |
|------|------|----------|------|
| 0    | 开始按钮 | ✓ | 需外部上拉 |
| 1    | 选择按钮 | ✓ | ADC1_CH0 |
| 2    | Home按钮 | ✓ | ADC1_CH1 |
| 3    | A按钮 | ✓ | ADC1_CH2 |
| 4    | B按钮 | ✓ | ADC1_CH3 |
| 5    | X按钮 | ✓ | ADC1_CH4 |
| 6    | Y按钮 | ✓ | ADC1_CH5 |
| 7    | L1肩键 | ✓ | ADC1_CH6 |
| 8    | R1肩键 | ✓ | ADC1_CH7 |
| 9    | L2扳机 | ✓ | ADC2_CH0 |
| 10   | R2扳机 | ✓ | ADC2_CH1 |
| 11   | L3摇杆按钮 | ✓ | ADC2_CH2 |
| 12   | R3摇杆按钮 | ✓ | ADC2_CH3 |
| 13   | 上方向键 | ✓ | ADC2_CH4 |
| 14   | 下方向键 | ✓ | ADC2_CH5 |
| 15   | 左方向键 | ✓ | ADC2_CH6 |
| 16   | 右方向键 | ✓ | ADC2_CH7 |

### 摇杆引脚 (4个ADC)
| GPIO | 功能 | ADC通道 | 范围 |
|------|------|---------|------|
| 1    | 摇杆1 X轴 | ADC1_CH0 | 0-4095 |
| 2    | 摇杆1 Y轴 | ADC1_CH1 | 0-4095 |
| 3    | 摇杆2 X轴 | ADC1_CH2 | 0-4095 |
| 4    | 摇杆2 Y轴 | ADC1_CH3 | 0-4095 |

### 震动电机 (2个PWM)
| GPIO | 功能 | PWM通道 | 频率 |
|------|------|---------|------|
| 17   | 左震动电机 | 通道0 | 5000Hz |
| 18   | 右震动电机 | 通道1 | 5000Hz |

### LED指示灯 (4个)
| GPIO | 功能 | 颜色 | 控制方式 |
|------|------|------|----------|
| 19   | 连接状态 | 蓝色 | GPIO |
| 20   | 震动状态 | 黄色 | GPIO |
| 21   | 电池状态 | 红色 | PWM |
| 22   | 充电状态 | 绿色 | GPIO |

### 电源管理
| GPIO | 功能 | 备注 |
|------|------|------|
| 5    | 电池电压监测 | ADC2_CH0 |
| 33   | 充电状态检测 | 输入 |
| 34   | 充电电流控制 | 输出 |

### 系统引脚
| GPIO | 功能 | 备注 |
|------|------|------|
| 35   | USB D- | 固定 |
| 36   | USB D+ | 固定 |
| 37   | 外部晶振 | 32.768kHz |
| 38   | 外部晶振 | 32.768kHz |
| 39   | 复位按钮 | 输入 |
| 40   | Boot模式 | 输入 |

### 备用引脚 (扩展功能)
| GPIO | 备用功能 | 备注 |
|------|----------|------|
| 8    | I2C SDA | 可接OLED |
| 9    | I2C SCL | 可接OLED |
| 10   | SPI MOSI | 可接扩展 |
| 11   | SPI MISO | 可接扩展 |
| 12   | SPI SCK | 可接扩展 |
| 13   | SPI CS | 可接扩展 |

## 注意事项

### 使用限制
1. GPIO 0-5 为 strapping 引脚，上电时需注意电平
2. ADC2 与 Wi-Fi 共用，使用 Wi-Fi 时ADC2不可用
3. GPIO 34-39 只能输入，不能输出
4. 避免使用 GPIO 6-11 (连接Flash)

### 电源要求
- 3.3V系统：ESP32模块和数字电路
- 5V系统：USB和充电模块
- 3.7V电池：直接驱动震动电机

### 电流需求
| 组件 | 典型电流 | 峰值电流 |
|------|----------|----------|
| ESP32-S3 | 80mA | 500mA |
| 震动电机 x2 | 200mA | 1000mA |
| LED指示灯 | 20mA | 80mA |
| 总计 | 300mA | 1580mA |